#### Annotation

注解是一系列元数据，用来解释程序代码，但是并非是代码本身的一部分，对于代码的运行效果没有直接影响。

使用@interface来定义，有属性值，可以使用default来指定默认值。

有5种元注解@Retention，@Target, @Documented, @Inherited, @Repeatable  

可以理解为标签，为类的结构填上标签，方便对类的成员进行管理

#### Exception

异常主要用于处理程序中的不被期望的事件，其顶层父类为 Throwable，由此派生出 Error 和 Exception。

异常总体上可分为两类，非检查异常（unckecked exception）和检查异常（checked exception）

异常处理方式：

1. try…catch{1, m}…[finally ]
2. throws

finally中return的覆盖

- finally中的return 会覆盖 try 或者catch中的返回值。
- finally中的return会抑制（消灭）前面try或者catch块中的异常
- finally中的异常会覆盖（消灭）前面try或者catch中的异常

#### Reflection

通过Class对象来获取java类中的各种成分对象（如Fields，Constructor对象）。Class是一个普通的类，这个类描述的是所有类的公共特性，其构造方法为private，所以Class对象的由JVM来创建，将class文件读入内存，并为之创建一个Class对象。

#### Enum

Enum 定义的枚举类默认继承了 java.lang.Enum 类。

每个枚举值都是一个枚举对象，每个对象都有name和ordinal属性，ordinal为枚举变量在枚举类中声明的顺序，下标从0开始 

#### Compare

Java实现对象排序的方式有两种，默认升序：

- 自然排序： java.lang.Comparable，通过接口继承实现
- 定制排序： java.util.Comparator ，作为方法参数来实现

#### Class and Instance

类是对一类事物的描述，是抽象的、概念上的定义

对象是实际存在的该类事物的每个个体，因而也称为实例(instance)。

JVM以类为模板，在堆中构造出实例。

类元信息存储在方法区中，一个.class文件，有且只有一个全限定名称，只有一个Class对象实例与之对应。

对象实例保存在堆中，可以有多个。

所以先有类，再有实例，实例方法可以访问类属性，而类方法不能访问实例变量。

类属性和方法通过static 修饰

#### Inner Class

匿名内部类的本质是一个接口或者抽象类的实现类。

内部类可以直接访问外部类的成员，包括私有。

外部类要访问内部类的成员，必须创建内部类对象。

#### Interface and Abstract Class

Interface ：常量和抽象方法的集合，也可以有静态方法和默认方法

abstract class：由abstract修饰的类，不能实例化

抽象层次不同：抽象类是对类（属性，行为）的抽象，而接口是对行为的抽象。

跨域不同：抽象类是具有相似特点的类的，而接口可以跨不同的类

设计层次不同：抽象类是自下而上来设计的，而接口是自上而下设计

#### for, foreach, iterator

foreach是语法糖，底层使用的也是iterator。

对于ArrayList, 循环时优先使用for循环，按地址取值

对于LinkedList应该使用迭代器或foreach，因为其在get任何一个位置的数据的时候，都会把前面的数据走一遍

foreach不可以修改，删除遍历的元素。

#### String

底层是`private final char value[]`，`final class String`

- final修饰符，引用不会变
- private, 只能在当前类中进行访问，而当前类并没有对value进行改变，不可变。
- `final class String`，虽然子类不能访问父类的private变量，但是其可以通过其它方法来修改（set, get），所以将String声明为, 防止继承破坏了其不可变性。

另外其缓存了hash，初始值为0，只有在第一次调用hashcode()时赋值

#### extends

子类继承父类。

1. 创建子类时同时会创建父类，并且将父类的成员变量，类变量，成员方法，类方法都会copy一份到子类中，然后销毁父类。即使父类成员的访问修饰符为private, 成员变量名称相同也都会copy一份。
2. 子类能否访问父类的成员变量主要通过访问修饰符来控制，子类不能访问访问修饰符为private 的成员。

#### access modifier

访问修饰符用于控制类、成员变量、方法和构造方法的可访问性 

项目结构：项目----> 包 ----> 类

public：项目下任何位置

protect：跨包，同一个包内的其他类访问，以及不同包中的该类的子类访问 

default：当前包下

private：当前类下

#### final

final关键字可以用来修饰类，变量， 方法，参数

1. 防止引用被篡改

   > ```java
   > static final Object lock = new Object();
   > 防止锁对象被修改造成线程安全问题
   > 
   > static final int count = 0;
   > 常量：在编译时进行宏替换
   > ```

#### static

java对象中每个成员变量在堆中都有自己的内存空间，如果很多对象都有相同的成员变量，则造成了内存空间的浪费。为了节约内存，可以使用static关键字来使每一个对象共享一块内存空间（方法区）。该变量称为类变量，类变量在类加载时就可以访问，而不需要创建对象（new），类加载只做一次，包括

1. 通过类名.来访问时加载
2. new 对象时会类加载。
3. 程序员可以用程序加载，比如：Class.forName()。

静态的成员(属性和方法)可以用对象.调用，但一般推荐用类名.调用

static 类型的属性会在类被加载之后初始化

java类的加载都是线程安全的，使用同步代码块

#### volatile

一个线程对变量写时，其他线程读可见，保证了线程的有序性和可见性



#### switch

switch 只支持整型 如 byte, short, char,inte

字符串通过hashCode来支持，switch 通过 ordinary

执行顺序，若无break，则依次向下穿透

#### 同步/异步与阻塞/非阻塞

I/O发生时，一定有两方参与，分为调用方和被调用方

阻塞/非阻塞 描述 调用方

同步/异步 描述 被调用方

#### 事务

- 编程式事务
- 声明式事务：用注解实现，最小粒度是作用在方法上

一个事务中不应该存在RPC, 更新缓存，文件写入等操作上