程序=指令+数据 

计算机三个根本性基础：  

1. 计算机是执行输入、运算、输出的机器  
2. 程序是指令和数据的集合 
3. 对计算机来说什么都是数字 



机器语言 ：01文件

编译：高级语言编写的文件转换成机器语言编写的文件（01）  ，计算机能看懂的只有

汇编语言程序转换成机器语言的过程称为汇编(assemble)，反过来称为反汇编(disassemble 





- 二进制 → 助记符（汇编器）→ A-0（编译器）→ FORTRAIN
- 汇编 一个指令对应一个指令
- 高级编程语言 一行可能转成几十条二进制指令



内存中每个字节（1字节8比特）都分配了一个被称为地址的编号 ，所有的编程语言中使用的内存地址都不是真实的物理地址，而是虚拟地址。  64位机器里的虚拟地址长度是64位, 实际占40位，虚拟地址一般0x7f打头  虚拟地址和物理地址通过分段线性映射，映射关系存在页表里 。

寄存器中存放的值可能是数据，也可能是数据的地址  一个CPU中有很多种寄存器，如累加器，程序计数器，指令计数器  程序计数器记录着程序下一条指令的地址，分支和循环主要通过跳转指令来控制程序计数器来实现  标志寄存器会根据上次运算的结果，保存累加器和通用寄存器的值 

函数调用时使用调用指令和返回指令，  调用指令会将函数调用的下一条指令的地址保存到名为栈的内存空间中。函数体执行完毕后，会在最后（出口）执行返回指令  返回指令的功能是将保存在栈中的地址设置到程序计数器中 





从物理上说，内存是以1字节为单位读写数据的
对于占用多个字节的数据，将数据的低位存放在内存低地址的方式称为小端序
1字节型的数组，和内存的物理结构完全一致

内存指主存（用于存储由CPU执行的程序指令和处理的数据的存储器），磁盘主要指硬盘
磁盘缓存：使用内存来提高磁盘访问速度的机制,磁盘缓存指将从磁盘中读取的数据暂时保存在内存中，当需要再次读取相同的数据时，就可以不访问磁盘，而是直接从内存中快速读取
虚拟内存(virtual memory)：将磁盘的一部分模拟成内存来使用
DLL（DLL文件,Dynamic Link Library（动态链接库）：在Windows中，包含函数和数据，在程序运行时进行动态链接的文件，多个应用程序可以共享同一个DLL文件。这就可以达到节约内存的效果
静态链接(static link)：函数静态链接到EXE文件中的过程，每个应用程序的可执行文件中都嵌入相同的函数，运行时在内存中会存在多个
硬盘的1个扇区大小一般为512Bytes,扇区(sector)是磁盘的物理存储单位。，Windows在逻辑（软件）上读写磁盘的单位是簇(cluster)，它的长度是扇区的整数倍，其实际长度根据硬盘容量确定，有512字节（1个簇 = 1个扇区）、1 KB（1个簇 = 2个扇区）同一个簇中不能存放不同的文件，否则无法只删除簇中的部分文件
程序加载到内存中由CPU运行
虚拟内存的实现方式分为分页式和分段式，Windows采用的是分页式，以页面为单位在内存和磁盘之间进行置换


文件中存储数据的基本单位时1个字节
Windows标准图像数据的格式是BMP（bitmap），由于显示器或打印机输出的点(bit)可以直接进行映射(mapping) 
能够恢复到压缩前状态的压缩方式称为无损压缩，不能恢复到压缩前状态的压缩方式称为有损压缩
无损压缩, PNG
有损压缩，JPEG, GIF
运行环境=操作系统+硬件
不同类型的CPU能解释的机器语言也不同
IO，负责计算机主机与外部设备连接的控制芯片
Windows消除了CPU之外的硬件差异
程序通常使用本机代码来发布
机器语言的程序也称为本机代码(native code)，
Linux直接用源代码来分发程序，因为Linux程序的源代码大多是用C语言来编写的，其内置了标准的C语言编译器
BIOS存储在ROM中，是预先内置在计算机中的一段程序。BIOS除了提供键盘和磁盘设备的基本控制程序，还负责启动引导装入程序。引导装入程序是存储在启动磁盘开头的一段很短的程序。启动磁盘一般是硬盘，但光盘和USB驱动器也可以作为启动磁盘使用
bootstrap指的是靴筒上提靴子用的靴襻

计算机具有硬件上处理中断(Interrupt)的能力；

扩展名 .obj的目标文件object file 的内容为本机代码 native code
由多个目标文件打包而成的文件叫库文件(library file)
库文件(library file) ，以lib结尾。包含DLL文件中的函数调用信息的文件
源文件通过编译后得到本机文件，通过编译和链接可得到EXE文件
链接器会从库文件中提取必要的目标文件并将它们拼接成一个EXE文件。在程序运行时进行动态链接的DLL文件也属于库文件。将导入库中的信息链接到EXE文件，由此程序就可以在运行时调用DLL中的函数了。
转储(dump)是指将文件内容按1字节2位十六进制数的形式显示出来
源代码翻译成本机代码的程序称为编译器

printf()等函数并不包含在源代码中，而是以库文件的形式随编译器一起被分发的。这样的函数称为标准函数
程序员编写的源代码中有一部分只调用了函数，而没有编写这些函数的实现。所以需要链接器将这部分函数链接到库文件中
Windows API的目标文件通常不是以库文件的形式存在的，而是以一种称为DLL（动态链接库）的特殊库文件的形式存在的
import32.lib中只包含MessageBox()位于DLL文件user32.dll中这一信息，以及这个DLL文件所在的目录，并不包含MessageBox()的目标文件本身。像import32.lib这样的库文件称为导入库
与之相对，包含目标文件本身，可以直接链接到EXE文件的库文件称为静态链接库(static link library)，其中“静态”与“动态”是一对反义词。sprintf()的目标文件所在的cw32.lib就属于静态链接库
在EXE文件中，变量和函数被分配的内存地址都是虚拟的，在程序运行时，这些虚拟的内存地址会转换成实际的内存地址。链接器会在EXE文件的开头记录需要进行内存地址转换的各个位置，这些信息被称为重定位信息。
重定位信息中记录的是变量和函数的相对地址。所谓相对地址，就是某个地址与基地址之间的相对距离，也就是偏移量
栈数据的存放和丢弃（清空操作）是由编译器自动生成的代码来完成的，不需要程序员关注。一个函数被调用时，会自动分配栈空间来存放数据，并在函数执行完毕返回时自动释放。与之相对，内存中的堆空间需要程序员通过程序显式地进行分配和释放。
那在程序运行结束后，这些空间就依然处于占用状态。这一现象称为内存泄漏(memory leak)
编译器是在程序运行之前对整个源代码进行翻译，而解释器则是在程序运行时对源代码逐行进行翻译。
多文件编译是指将一个程序分为多个源文件，并对其分别进行编译，最后合并生成一个EXE文件.
DLL文件中的函数可以被多个程序共享，从而节约内存和磁盘空间。此外还有一个好处，即如果修改了函数的内容，则不需要重新链接（静态链接）调用该函数的程序


监控程序(monitor program)负责加载并运行程序
系统调用：调用操作系统提供的功能
在操作系统环境中运行的应用程序并不会直接访问硬件，而是通过操作系统间接地访问硬件
win32/64 API是以若干DLL文件的形式来提供的，每个API的本体都是C语言编写的函数
多任务(multitask)是指同时运行多个程序的功能。Windows使用时间片的方式来实现多任务.
Windows还提供了以单个函数为单位分割时间片的多线程功能
中间件(middleware)，也就是介于操作系统和应用程序中间(middle)的软件
操作系统和中间件也统称为系统软件(system software)
即插即用(plug-and-play)是一种让新设备插入(plug)之后就可以立即使用(play)的机制。当新设备连接到计算机后，操作系统可以自动安装并配置用于控制该设备的设备驱动程序(device driver)


本机代码就是一串数字，直接用数字来编写程序无异于写天书。于是，人们发明了一种方法，为每个本机代码的指令分配一个英语缩写来表示其功能。例如，把对32位数据进行加法运算的本机代码称为addl（addition long的缩写），把进行比较的本机代码称为cmpl（compare long的缩写）。这些缩写称为助记符，使用助记符的编程语言称为汇编语言。
汇编语言源代码中的指令分为两种，一种是会被转换成本机代码的一般指令，另一种是专门针对汇编器的伪指令。伪指令负责告诉汇编器程序的结构和汇编的方法，因此也被称为汇编程序指令(assembler directive)
在汇编语言中，每一行都表示CPU要执行的一个指令。汇编语言指令的语法是“操作码　操作数”
操作码表示指令的动作，操作数表示指令的操作对象
数据在栈中是从下（编号较大的地址）往上（编号较小的地址）堆积起来，然后从上往下取出的


Direct Memory Access（直接内存访问）负责在计算机主机与外部设备之间进行输入输出的芯片称为I/O控制器，简称I/O。
为了区分连接到计算机上的不同外部设备，每个设备会被分配一个I/O地址。
DMA是指外部设备不经过CPU中转，直接与计算机内存传输数据。网络、磁盘等数据量大的外部设备会使用DMA，不同设备会通过DMA通道来进行区分
“设备上下文句柄”的参数hdc(handle to device context)表示字符串和图像输出对象在Windows中的识别代码，并没有直接表示硬件
用于对主机和外部设备的电信号进行相互转换的芯片[插图]，这些芯片统称为I/O控制器（简称为I/O）。由于数据格式和电压不同，所以计算机主机并不能和外部设备直接相连，为此我们需要使用I/O控制器。
I/O控制器中有用于临时存放输入输出数据的存储器，这种存储器被称为端口。端口的英文单词port直译过来是港口的意思
一个I/O控制器可以控制一个外部设备，也可以控制多个外部设备，因此我们就需要用端口号来区分不同的端口。端口号也被称为I/O地址
IRQ Interrupt Request（中断请求）

发出中断请求的是连接外部设备的I/O控制器，运行中断处理程序的是CPU。要识别具体是哪个设备发出的中断请求，我们需要使用名为中断号的编号，而不是端口号。设备管理器属性的IRQ项目中显示的0xFFFFFFF7(- 9)，就表示由显示器发出的中断请求编号为0xFFFFFFF7(- 9)

CPU接受来自中断控制器的中断请求之后，会从当前运行的主程序切换到中断处理程序。中断处理程序要做的第一件事，就是将CPU中所有寄存器的值都暂存到内存的栈空间中。当中断处理程序完成与外部设备之间的输入输出操作之后，最后还要将暂存到栈中的值恢复到寄存器中，继续运行主程序。
DMA是指外部设备不经过CPU中转，直接和内存进行数据传输，常用于网络、磁盘等设备。使用DMA可以将大量数据快速传输到内存中，它能够节省CPU中转所需的时间，而且还可以避免高速的CPU等待低速的外部设备，从而提高其他任务的处理效率。DMA是通过名为DMA控制器(DMA Controller，DMAC)的芯片实现的。DMA控制器中有多个用于进行DMA的窗口，这些窗口通过名为DMA通道的编号来进行区分，进行DMA的外部设备也是通过分配给它们的DMA通道来进行区分的
与DMA相对，通过CPU在外部设备和内存之间传输数据的方式称为PIO(Programmed I/O)
计算机中有一个用于保存要显示的信息的存储器，这一存储器称为显存(Video RAM，VRAM)。程序只要将数据写入显存，数据就可以在显示器上显示出来
显卡上装有独立于内存的显存和专用的图像处理器GPU（Graphics Processing Unit，图形处理器



事件驱动的流程也可以用流程图表示，但是由于要排列很多的菱形符号（表示条件分支），画起来会很复杂。所以下面介绍便于表示事件驱动的“状态转化图”  ![image](eab34bd1b27cdb02487e7bff/6b6e47c4866b61b38577ad39.png)

  “哨兵”指的是一种含有特殊值的数据，可用于标识数据的结尾等。  多用在线性搜索（从若干个数据中查找目标数据）等算法中。

线性搜索的基本过程是将若干个数据从头到尾，依次逐个比对，直到找到目标数据  