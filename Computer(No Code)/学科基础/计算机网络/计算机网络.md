# 计算机网络

### 1. 概述

**网络**(network)由若干**结点**(node)和连接这些结点的**链路**(link)组成。

**计算机网络**是一些互相连接的、自治的计算机的集合

**互联网**（internet）泛指由多个**计算机网络**互连而成的网络

> 互联网是“**网络的网络**”(network of networks)。
>
> 最大的互联网是**英特网**（Internet）

**英特网**（Internet）：最大的互联网，网络把许多计算机连接在一起，因特网则把许多网络连接在一起

**英特网组成：**

- **边缘部分 : 资源子网**由所有连接在因特网上的**主机**组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享
- **核心部分：通信子网**由大量**网络**和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）

**因特网服务提供者ISP** (Internet Service Provider)：用户可以向ISP缴费，从而获取IP地址

三网融合：电信网，有线电视网，互联网

**通信方式**

  - 客户服务器方式（C/S 方式）即Client/Server方式 
    - 客户是服务的请求方，服务器是服务的提供方
    - 客户程序必须知道服务器程序的地址
    - 服务器系统启动后即自动调用并一直不断地运行着，被动地等待并接受来自各地的客户的通信请求
  - 对等方式（P2P 方式）即 Peer-to-Peer方式 ，
    - 指两个主机在通信时并不区分哪一个是服务请求方还是服务提供方

### 2. 分类

1. 逻辑功能
   - 网络边缘（资源子网）：由所有连接在因特网上的**主机**组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享
   - 网络核心（通信子网）：由大量**网络**和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）
2. 按作用范围
   - 局域网（LAN）：
   - 城域网（MAN）：
   - 广域网（WAN）：
3. 按拓扑结构
   - 星型：易于诊断故障
   - 总线型
   - 树型
   - 网状型
   - 环型：单个节点故障，会造成全网瘫痪

ps： 各企业服务器存放到ISP上，各ISP之间通信拥挤，访问速度慢

宽带距离：用户到ISP运营商之间的距离 

![image-20221106094047805](计算机网络.assets/image-20221106094047805.png)

### 3. 网络设备

1. 中继器
   - 连接拓扑**结构相同的两个局域网**（信号放大与再生）
   
2. 集线器（HUB)：多端口中继器
   - 扩大网络的传输距离，
   - 信号放大与再生，半双工通信，广播式数据传输，形成共享式以太网
   
3. 网桥
   - 连接**两个相同类型的局域网**
   - 对帧进行转发，根据MAC分区块，可**隔离碰撞**
   
4. 交换机（Switch）
   
   - 分配网络数据
   
   - 全双工通信，根据数据帧中的**MAC地址和缓存中的路由表转发数据**，形成交换式以太网
   - 扩大局域网，只能连接相同类型的网络
   
5. 网卡NIC （Network Interface Card 网络适配器）
   - 链路层，是连接计算机和传输介质的接口
   - 拥有48位的MAC地址，在其ROM芯片中，不可修改
   
6. 路由器：

   - 路由器可以把一个IP分给多个主机使用，对外IP相同

   - 根据IP地址和缓存中的路由表转发数据，实现**分组交换/转发分组**(packet switching)

   - **连接不同类型和不同协议的网络**

   - 自动分配IP，**隔绝**IP地址引起的网**络广播风暴**
   - 也有ip地址，末尾通常是1
   - 路由器处理分组的过程是：
     1. 把收到的分组先放入**缓存**（暂时存储）
     2. 查找**转发表**，找出到某个目的地址应从哪个端口转发
     3. 把分组送到适当的端口转发出去

7. 网关（Gateway，网间连接器，协议转换器）
   - 用于两个高层**协议不同**的网络互联
   
8. 调制解调器（Modern）
   - 能将计算机的数字信号翻译成可沿普通电话线传输的模拟信号。
   - 调制：数字信号 ---> 模拟信号
   - 解调：模拟信号 ---> 数字信号 



### 4. 协议

Protocol：为进行计算机网络中的**数据交换**而建立的**规则**，标准或约定的集合。

三要素：

- 语法：数据与控制信息的结构或格式
- 语义：需要发出何种控制信息，完成何种动作以及做出何种响应
- 同步（时序）：事件实现顺序的详细说明

### 5. 网络地址

MAC地址（物理地址）：48位，固化在网卡ROM芯片中，不可修改

IP地址：32位，IP = {<网络号>， <主机号>}，

IPV4分类：根据二进制表示时的第一个字节的数值范围，将IP地址分为ABCDE五大类

特殊的IP地址：

- **主机号为1**，表示本网段的内部**广播地址**，不能分给计算机使用
- 主机号全为0，表示本网络的网段，计算机所在网络
- 127开头的本地回环地址，用于测试TCP/IP协议正确性
- D类地址为组播地址，主要是路由协议OSPF等使用
- E类地址用于研究使用

子网掩码：用于划分IP地址中的网络地址和主机地址。左边是网络号，用1表示，右边是主机号，用0表示

各类网络的子网掩码

- A类：255.0.0.0
- B类：255.255.0.0
- C类：255.255.255.0

网段: 同一网段下的IP地址网络号相同

网关：网段的第一台计算机，10.0.0.1

## 第一章 计算机网络概述

### 1. 网络分类

- **局域网**：覆盖范围小（到交换机的距离为100米内），自己花钱买设备，带宽固定（10M，100M，1000M），自己维护。星型结构
- **广域网**：距离远，花钱租带宽，他人维护
- Internet： 由ISP组成，有自己的机房，对网民提供访问Internet链接服务

### 2. 上网过程

用户在浏览器中键入URL，数据包到DNS，DNS将URL解析成IP地址返回给用户，浏览器将再通过IP地址访问服务器。服务器接收到请求后，将网页分割成一个个数据帧。数据帧存储到网卡缓存，按顺序发送给用户。数据帧不能删除，当用户收到数据包后确认后无误后向服务器确认后，才可以删除

### 3. 数据

数据包 = 源IP地址 + 目标IP地址

数据帧 = 数据包 + srcMAC地址 + dstMAC地址



在数据帧的转发过程中，MAC地址会一直变化

### 4. OSI参考模型

- 应用层: TELNET, FTP, SMTP, POP3, DNS, HTTP
  - 所有能产生网络流量的程序, 
- 表示层 在传输之前是否进行加密 或 压缩处理 编码(二进制 ASCll)
- 会话层  一个网站，一个会话。查木马 netstat -nb
- 传输层 :TCP, UDP
  - 传输数据段
  - 可靠传输 TCP，按端口寻址，**端到端**
  - 不可靠传输 UDP
  - 流量控制，
- 网络层 ：IP， ARP， RARP， ICMP
  - 不可靠传输，IP为TCP和UDP服务，尽最大努力服务，允许丢失和乱序出现
  - 路径选择，路由及逻辑寻址：负责选择最佳路径，规划IP地址
- 数据链路层： 
  - 封装成帧：将比特流组装成**帧**
  - 透明传输，
  - 差错检验：校验帧中的数据是否出现了错误。
  - MAC寻址
- 物理层：
  - 传输**比特流**
  -  定义接口标准 电气标准（电压...），如何在物理链路删传输更快的速度


下一层为上一层服务，下一层出现故障会影响上一层的使用，各层之间又相互独立

![](ppt\OSI参考模型.png)


### 5. OSI参考模型对网络排错指导

1. 物理层故障：查看连接状态，发送和接收的数据包，水晶头共8根线，两根发，两根收
2. 数据链路层故障：MAC冲突（可以通过修改注册表修改MAC地址）， 欠费，网速没办法协商一致，计算机连接到错误的VLAN（虚拟局域网）
3. 网络层故障：配置错误IP地址，子网掩码；配置错误的网关；路由器没有配置到达目标网络的路由
4. 应用层故障：应用程序配置错误（代理）

### 6. OSI参考模型和网络安全

1. 物理层安全
2. 数据链路层安全 ADSL账号密码 ， 数据链路层安全，VLAN，交换机端口绑定MAC地址
3. 网络层安全 在路由器上使用ACL控制数据包流量
4. 应用层安全 开发的应用程序没有漏洞

### 7. 性能指标

1. 速率：连接在计算机网络上的主机在数字信道上传送数据位数的速率，也称为data rate or bit rate
2. 带宽：数据通信领域中，数字信道所传送的最高数据率
3. 吞吐量：即在单位时间内通过某个网络的数据量。b/s, Mb/s
4. 时延：
   - 发送时延
   - 传播时延
   - 处理时延
   - 排队时延
5. 时延带宽积 = 传播时延 X 带宽
6. 往返时间（RTT（Round - Trip Time））：从发送方发送数据开始，到发送方收到接收方确定
7. 利用率：
   - 信道利用率
   - 网络利用率：信道利用率加权平均值



## 第二章 物理层

### 1. 物理层的基本概念

物理层：解决如何在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。主要任务为确定传输媒体的接口的一些特性：即

- 机械特性
- 电器特性
- 功能特性
- 过程特性

### 2. 数据通信基本概念

- 通信模型

![](ppt/数字通信模型.png)

- 相关的术语

![](ppt/相关术语.png)

- 信道

![](ppt/信道.png)

- 基带信号 带通信号

![](ppt/基带信号.png)

- 调制方法

![](ppt/调制方法.png)

- 常用编码

![](ppt/常用编码.png)

![](ppt/编码方式.png)



- 信道的极限容量
- 奈氏准则：没有信号干扰，码元的传输速率有上限

![](ppt/奈斯准则.png)

- 香农公式：有信号干扰，无差错传输速率 C = W log2(1+S/N)  b/s

![](ppt/香农定理.png)

### 3.物理层设备--集线器（很少使用）

- 工作特点：在网络中只起到信号放大和重发作用，目的是扩大网络的传输范围，不具备信号的定向传送能力
- 最大传输距离：100m
- 很大的冲突域：通过广播的形式传递比特流

### 4. 信道复用技术

- 频分复用
- 时分复用
- 码分复用

### 5. 数字传输系统

### 6. 宽带接入技术

1. ADSL-- Asymmetric Digital Subscriber Line（ [非对称数字用户线路](https://baike.baidu.com/item/%E9%9D%9E%E5%AF%B9%E7%A7%B0%E6%95%B0%E5%AD%97%E7%94%A8%E6%88%B7%E7%BA%BF%E8%B7%AF/6867524)）
2. DMT
3. HFC -- Hybrid Fiber Coax（光纤同轴混合网）
4. FTTx（光纤到。。。）
   - FTTH（Fiber To The Home）
   - FTTB（Fiber To The Building）
   - FTTC（Fiber To The Curb）



## 第三章 数字链路层

### 1. 基本概念

- 数据链路层传递的是帧

- 数据链路层使用的信道
  - 点对点信道：一对一
  - 广播信道：一对多
- 链路：点到点的物理线路段，中间没有任何其他交换结点
- 数据链路：除了物理线路外，还必须有通信协议来控制这些数据的传输

### 2. 解决的三个问题

1. 封装成帧：帧首部 + IP数据包 + 帧尾部

![](ppt/数据封装.png)

![](ppt/数据帧.png)

1. 透明传输：发送端的数据链路层中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC”(十六进制编码：1B)。接收端的数据链路层在讲数据送往网络层之前删除插入的转义字符
2. 差错检测：CRC（循环冗余吗）

### 3. 点到点的数据链路层 PPP协议

- 用户使用拨号电话接入Internet时，一般都是使用PPP协议

- PPP协议的组成
  - LCP 身份验证

![](ppt/PPP协议组成.png)

- PPP协议帧格式

![](ppt/PPP协议帧格式.png)

### 4. 使用广播信道的数据链路层

总线型和以集线器组成的网络

- 共享通信媒体

  - 静态划分信道（信道复用一般用于广域网，局域网来说范围较小，信道复用技术过于麻烦。一般不使用）
    - 频分， 时分， 波分， 码分复用

  - 动态媒体接入控制（多点接入）
    - 随机接入（以太网采用）
    - 受控接入（废弃）

- 认识以太网

  - 最初为总线型组网

  - 具有广播特性的总线上实现一对一的通信（MAC地址）
  - 采用CSMA/CD协议（载波监听多点接入/碰撞检测）
    - “多点接入”：许多计算机以多点接入的方式连接在一根总线上
    - “载波监听”：每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发生碰撞

### 5. 以太网

- 定义：IEEE的802.3标准的局域网,DIX Ethernet V2与IEEE的802.3相差很小
- 媒体接入控制MAC子层
- 提供不可靠的交付，i.e. 尽最大努力交付
- MAC地址（48位，i.e. 6个字节。16进制表示，IEEE的注册管理机构RA负责向厂家分配前3个字节，后3个字节由厂家自行指定）
- 以太网MAC帧格式（DIX Ethernet V2）

![](ppt/MAC帧格式.png)

### 6. 网卡（网络适配器）

作用：适配器从网络上每收到一个MAC帧就首先用硬件检查MAC帧中的MAC地址

- 如果是发往本站的帧则手下 ，然后再进行其他的处理
- 否则就讲此帧丢弃

发往本站的帧，包括以下三种：

- 单播帧（一对一）
- 广播帧（一对全体）
- 多播帧（一对多）

## 第四章 网络层

### 1. 概述

根据数据包的IP地址，在不同网络之间尽力转发数据包。不负责丢失重传以及数据包的传送顺序。Hub连接的是同一个网络。子网掩码可以看出网络是那几部分（网络号，网段）（i.e.: 10.0.0.0 255.0.0.0  网络号为10，同一网络下的IP地址网络号相同，网关是通常是该网段的第一台计算机，10.0.0.1,）

```
Continue with configuration dialog? [yes/no]: n

Press RETURN to get started!

Router>en
Router#config terminal 
Router(config)#interface fastEthernet 0/0
Router(config-if)#no shutdown 
Router(config-if)#ip address 10.0.0.1 255.0.0.0
Router(config-if)#exit

Router(config)#interface serial 2/0
Router(config-if)#no shutdown 
Router(config-if)#clock rate 64000
Router(config-if)#ip address 11.0.0.1 255.0.0.0

Router(config-if)#exit

Router#show ip route
Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
       * - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route

Gateway of last resort is not set

C    10.0.0.0/8 is directly connected, FastEthernet0/0
C    11.0.0.0/8 is directly connected, Serial2/0

Router#config te
Router#config terminal 
Enter configuration commands, one per line.  End with CNTL/Z.
Router(config)#ip route 12.0.0.0 255.255.0.0 11.0.0.2

Router#show ip route
Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
       * - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route

Gateway of last resort is not set

C    10.0.0.0/8 is directly connected, FastEthernet0/0
C    11.0.0.0/8 is directly connected, Serial2/0
     12.0.0.0/16 is subnetted, 1 subnets
S       12.0.0.0 [1/0] via 11.0.0.2
```

网络层  路由器 Router

链路层  交换机 Switch

物理层  集线器 Hub

计算机通信过程



发送端

1. 应用程序准备要传输的文件
2. 传输层 将文件分段 并编号     段
3. 网络层 添加目标IP地址源      包        路由器 能识别IP地址，MAC地址，比特流
4. 数据链路层                              帧        交换机，识别MAC地址，比特流。存储转发
   - 使用自己的子网掩码 判断自己在哪个网段
   - 使用自己的子网掩码 判断目标地址在哪个网段
   - 如果是同一个网段 ARP协议广播解析目标IP地址的MAC
   - 如果不是一个网段 向网关

5. 物理层                                      比特流   集线器，进行信号的加强

![1582809449254](ppt/1582809449254.png)



![](ppt/TCP_IP.png)

### 2. ARP与RARP

ARP地址解析协议：逻辑地址（IP地址）--> ARP协议 --> 物理地址（MAC)

> 将IP地址通过广播（本网段），目标MAC地址地址是FF-FF-FF-FF-FF-FF, 解析目标IP地址的MAC地址

RARP逆向地址解析协议

```
arp -a
```

### 3 ICMP

(Internet Control Message Protocol）Internet控制报文协议,它是TCP/IP协议簇的一个子协议，用于在IP主机、路由器之间传递控制消息。控制消息是指网络通不通、主机是否可达、路由是否可用等网络本身的消息。这些控制消息虽然并不传输用户数据，但是对于用户数据的传递起着重要的作用。

ping （pack）

```
C:\Users\Milo>ping www.microsoft.com

正在 Ping e13678.ca.s.tl88.net [223.119.141.186] 具有 32 字节的数据:
来自 223.119.141.186 的回复: 字节=32 时间=48ms TTL=54
来自 223.119.141.186 的回复: 字节=32 时间=47ms TTL=54
来自 223.119.141.186 的回复: 字节=32 时间=36ms TTL=54
来自 223.119.141.186 的回复: 字节=32 时间=35ms TTL=54

223.119.141.186 的 Ping 统计信息:
    数据包: 已发送 = 4，已接收 = 4，丢失 = 0 (0% 丢失)，
往返行程的估计时间(以毫秒为单位):
    最短 = 35ms，最长 = 48ms，平均 = 41ms
    
ping IP_add -t 
ping IP_add -i TTL数
ping IP_add -l size 
```

- TTL: 数据包生存时间，每过一个路由器，数值-1
  - Linux 64
  - Windows 128
  - Unix 255
- pathping  跟踪数据包路径 计算丢包率
  - 路由器转发丢包
  - 链路丢包
- tracert 跟踪数据包路径

### 4 IGMP

Internet Group Management Protocol -- Internet 组管理协议

点到点

广播

组播 = 多播

### 5 IP数据包

![](ppt/IP数据包.png)



网络层 数据包 65535字节

数据链路层 数据1500字节  最大传输单元 MTU

数据包 如果不分片 数据包数据最大不超过1480字节

数据包分片

- 版本：占 4 位，指 IP 协议的版本

- 首部长度——占 4 位，可表示的最大数值是 15 个单位(一个单位为 4 字节)

  因此IP 的首部长度的最大值是60 字节。

- 区分服务——占 8 位，用来获得更好的服务。在旧标准中叫做服务类型，但实际上一直未被使用过。

  1998 年这个字段改名为区分服务。只有在使用区分服务（DiffServ）时，这个字段才起作用。

  在一般的情况下都不使用这个字段 

- 总长度——占 16 位，指首部和数据之和的长度，单位为字节，因此数据报的最大长度为 65535 字节。

  总长度必须不超过最大传送单元 MTU。 

- 标识(identification)    占 16 位，它是一个计数器，用来产生数据报的标识。 

- 标志(flag)    占 3 位，目前只有前两位有意义。标志字段的最低位是 **MF** (More Fragment)。MF = 1 表示后面“还有分片”。MF = 0 表示最后一个分片。标志字段中间的一位是 **DF** (Don't Fragment) 。只有当 DF = 0 时才允许分片。 

- 片偏移(12 位)指出：较长的分组在分片后某片在原分组中的相对位置。片偏移以 8 个字节为偏移单位

- 生存时间：TTL （Time to Live）数据包生存时间，数据报在网络中可通过的路由器数的最大值，每过一个路由器，数值-1

- 协议：指出此数据报携带的数据使用何种协议以便目的主机的 IP 层将数据部分上交给哪个处理过程
- 首部检验和(16 位)字段只检验数据报的首部不检验数据部分。这里不采用 CRC检验码而采用简单的计算方法

### 6 网络畅通条件

数据包有去有回：通

计算机有网关

## 第五章 传输层

### 1 TCP和UDP的应用场景

![](ppt/协议集.png)

- TCP(Transmission Control Protocol, 传输控制协议)：需要将传输的文件分段 传输 建立会话 可靠传输 流量控制。如Email，FTP
- UDP(User Date Protocol， 用户数据报协议)：一个数据包就能够完成数据通信 不分段 不需要建立会话 不需要流量控制 不可靠传输 如想DNS请求域名解析，qq聊天，多播，广播
- 查看会话 netstate -n 
- 查看会话的进程 netstate -nb

### 2 传输层协议和应用层协议之间的关系

常见的应用层协议使用的端口，端口号由网卡识别，

- http=TCP+80

- https=TCP+443
- RDP=TCP+3389
- FTP=TCP+21
- 共享文件夹=TCP+445
- SMTP=TCP+25 发邮件
- POP3=TCP+110 收邮件
- telnet=TCP+23
- SQL = TCP+1433
- DNS=UDP+53 

### 3 服务和应用层协议之间关系

- 服务使用 TCP 或 UDP的端口侦听（LISTENING）客户端请求

- 客户端使用IP地址定位服务器 使用目标端口 定位服务

- 可以在服务器网卡上设置只开放必要的端口 实现服务器网络安全

- 查看会话 netstat -n 
- 查看会话的进程 netstat -nb
- 查看服务侦听的端口 netstat -an
- telnet 192.168.80.100 3389 测试该端口是否打开

### 4 传输层作用与端口号

- IP协议的作用范围：提供主机之间的逻辑通信
- TCP和UDP协议的作用范围：提供进程之间的逻辑通信
- 端口号用一个16位端口号进行标志。只具有本地意义，即端口号只是为了标志本计算机应用层中的各进程，在因特网中不同计算机的相同端口号没有联系
  - 端口范围 0-65535（2^16）
  - 熟知端口 0-1023
  - 登记端口 1024 - 49151
  - 客户端端口 49152-65535
  - netstat -n | find "ESTABLISHED"

### 5 UDP

- 无连接，即发送数据之前不需要建立连接
- 使用最大努力交付，即不保证可靠交付，同时不适用拥塞控制
- 面向报文。不适用拥塞控制，适合多媒体通信的要求
- 支持一对一，一对多，多对一，多对多的交互通信
- 首部开销小，只有8个字节

![](ppt/UDP首部.png)

### 6 TCP

- 面向连接的传输层协议
- 每一条TCP连接只能有两个端点（endpoint），每一条TCP连接只能是点对点的（一对一）
- 提供可靠交付的服务
- 提供全双工通信（同时收发）
- 面向字节流
- TCP连接的端点不是主机，不是主机的IP地址，不是传输层的协议端口，TCP连接的端点叫套接字（socket=IP地址:端口）
- 每一条TCP连接的唯一地被通信两端的两个端点（即两个套接字）所确定。
  - TCP连接::={socket1, socket2}={(IP1:port1),(IP2:port2)}

### 7 TCP可靠传输

- 自动重传请求ARQ（Automatic Repeat reQuest）:重传的请求是自动进行的，接收方不需要请求发送方重传某个出错的分组。
  - 停止等待协议简单，但是信道利用率太低

![](ppt/停止等待.png)

![](ppt/确认丢失.png)

滑动窗口+累计确认

### 8 TCP 报文首部

![](ppt/TCP首部.png)

![](ppt/TCP创送.png)



1. ARP：解析网关的MAC地址
2. UDP：DNS解析目标域名，
3. 获得IP地址
4. TCP：三次握手

![](ppt/三次握手.png)

## 第六章 应用层



### 1 域名

DNS服务作用：负责解析域名，将域名解析成IP

域名：全球唯一（www.dba.baidu.com.）

- 根 "."
- 顶级域名 com  edu net cn org gov
- 二级域名 baidu  
- 三级域名 dba  

```
C:\Users\Milo>nslookup
默认服务器:  UnKnown
Address:  192.168.1.1
```

### 2 DHCP

动态主机分配

- 静态IP地址
- 动态IP地址

DHCP客户端请求IP地址的过程

查看DHCP：ipconfig /all

释放租约：ipconfig /release

重新申请：ipconfig /renew

### 3 FTP服务

FTP（File Transfer Protocol）：文件传输协议

- 控制连接：标准端口号为21，用于发送FTP命令信息
- 数据连接：标准端口号为20，用于上传下载数据
- 数据连接的建立类型：

  - 主动模式：服务端从20端口主动向客户端发起连接。防火墙需要打开21和20端口。
  - 被动模式：服务端在指定范围内的某个端口被动等待客户端发起连接
- FTP传输模式

  - 文本模式：ASCLL模式，以文本序列传输数据
  - 二进制模式：Binary模式，以二进制序列传输数据
- FTP服务器端，如果有防火墙，需要在防火墙开21和端口，使用主动模式
- 被动模式，FTP服务端打开一个新端口，等待FTP客户端的连接

### SSH

端口22

### 4 TELNET

  远程终端协议：默认使用TCP的23端口.能让用户在远程计算机登录，并使用远程计算机上对外开放的所有资源

### 5 RDP

远程桌面协议(Remote Desktop Protocol)

### 6 HTTP

客户端浏览器或其他程序与**Web服务器**之间的应用层通信协议

www(world wide web)

URL： <协议>://<主机><主机><端口>/<路径>

### SMTP

简单邮件传输协议，用来发送电子邮件

### POP3

邮局协议3.0，接收电子邮件的C/S协议



### 7 代理服务器

优点：

1. 节省内网访问Internet的带宽
2. 通过web代理绕过防火墙
3. 防跟踪

## 第七章 网络安全

### 概述

1. 鉴别：确认消息的来源
2. 完整性：文件无修改----单向散列函数
3. 抗抵赖性：发送者不能否认他发的消息---数字签名

通信面临的四种威胁

1. 截获
2. 中断
3. 篡改
4. 伪造

### 恶意程序

1. 计算机病毒：能自我复制
2. 蠕虫
3. 特洛伊木马
   - 查看会话 netstat -n 是否有可疑会话
   - 运行 msconfig 服务  隐藏微软服务
4. 逻辑炸弹

### 加密技术

- 对称加密：发送和接收数据的双方必使用相同的密钥对明文进行加密和解密运算，如DES，IDEA
  - 加密算法，加密秘钥
  - 优点：加密效率高
  - 缺点：秘钥在网络上传播不安全，维护比较麻烦
- 非对称加密：加密秘钥和私钥秘钥不同。
  - 传输数据时，公钥加密，私钥解密
  - 身份验证时：私钥加密，公钥解密。


**数字签名**：对文件使用单向散列函数获得**消息摘要**，摘要确保文件的完整性，再使用发送方的私钥对摘要形成数字签名

- 防止抵赖，能够检查签名之后内容是否被更改

**签名验证**

![image-20221106114109989](计算机网络.assets/image-20221106114109989.png)

认证

1. 消息完整性认证：验证信息在传送或存储过程中是否被篡改
2. 身份认证：验证消息的收发者是否持有正确的身份认证符，如口令，密钥等
3. 消息的序号和操作事件等的认证，防止消息重发或延迟等攻击

授权：给与用户特定权限用于操作系统资源

防止发送方不承认这是自己的私钥或被他人盗用私钥，从而需要第三方（证书颁发机构 CA）来发放证书（私钥和公钥（CA签名），CA的私钥）

证书颁发机构作用：

- 为企业和用户颁发数字证书，确保这些企业和个人的身份是真实的
- 发布证书吊销列表
- 企业和个人信任证书颁发机构





### SSL

SSL 安全套接字，https中的s

- 位于传输层之上，应用层之下
- 在发送方，SSL接受应用层的数据，对数据进行加密，然后把加了密的数据送往TCP套接字
- 在接受方，SSL从TCP套接字读取数据，解密后把数据交给应用层

SSL的功能

1. SSL服务器鉴别：允许用户证实服务器的身份。具有SSL功能的浏览器维持一个表，上面有一些可信赖的认证中心CA（Certificate Authority）和它们的公钥
2. 加密的SSL会话：客户和服务器交互的所有数据都在发送方加密，在接收方解密。
3. SSL客户鉴别：允许服务器证实客户的身份

## 第八章 因特网上的音频视频

### 1. 面临的问题

- 音频视频 占用的带宽高 网速恒定 延迟低
- 数据信息 对带宽，网速是否恒定，延迟要求不高



1. 